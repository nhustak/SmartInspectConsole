<UserControl x:Class="SmartInspectConsole.Views.LogEntryDetailView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800"
             Background="{DynamicResource BackgroundBrush}"
             Foreground="{DynamicResource ForegroundBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header Info Section -->
        <Border Grid.Row="0" Background="{DynamicResource SurfaceBrush}"
                BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1"
                Padding="12,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Title (spans both columns) -->
                <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,8">
                    <TextBlock Text="Title" FontSize="10" Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    <TextBlock Text="{Binding Title}" FontSize="14" FontWeight="SemiBold" TextWrapping="Wrap"/>
                </StackPanel>

                <!-- Left Column -->
                <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,16,4">
                    <TextBlock Text="Application" FontSize="10" Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    <TextBlock Text="{Binding AppName}" FontSize="12"/>
                </StackPanel>

                <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,16,4">
                    <TextBlock Text="Session" FontSize="10" Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    <TextBlock Text="{Binding SessionName}" FontSize="12"/>
                </StackPanel>

                <StackPanel Grid.Row="3" Grid.Column="0" Margin="0,0,16,4">
                    <TextBlock Text="Host" FontSize="10" Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    <TextBlock Text="{Binding HostName}" FontSize="12"/>
                </StackPanel>

                <!-- Right Column -->
                <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,0,0,4">
                    <TextBlock Text="Timestamp" FontSize="10" Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    <TextBlock Text="{Binding Timestamp, StringFormat=yyyy-MM-dd HH:mm:ss.fff}" FontSize="12"/>
                </StackPanel>

                <StackPanel Grid.Row="2" Grid.Column="1" Margin="0,0,0,4">
                    <TextBlock Text="Type / Viewer" FontSize="10" Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    <TextBlock FontSize="12">
                        <Run Text="{Binding LogEntryType, Mode=OneWay}"/>
                        <Run Text=" / "/>
                        <Run Text="{Binding ViewerId, Mode=OneWay}"/>
                    </TextBlock>
                </StackPanel>

                <StackPanel Grid.Row="3" Grid.Column="1" Margin="0,0,0,4">
                    <TextBlock Text="Process / Thread" FontSize="10" Foreground="{DynamicResource ForegroundSecondaryBrush}"/>
                    <TextBlock FontSize="12">
                        <Run Text="{Binding ProcessId, Mode=OneWay}"/>
                        <Run Text=" / "/>
                        <Run Text="{Binding ThreadId, Mode=OneWay}"/>
                    </TextBlock>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Data Section -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Data Header with Format Info and Toggle -->
            <Border Grid.Row="0" Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,0,1"
                    Padding="12,6">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal">
                        <TextBlock Text="Data" FontWeight="SemiBold" VerticalAlignment="Center"/>
                        <Border Background="{DynamicResource AccentBrush}" CornerRadius="3"
                                Padding="6,2" Margin="8,0,0,0"
                                Visibility="{Binding HasData, Converter={StaticResource BoolToVisibilityConverter}}">
                            <TextBlock Text="{Binding DetectedFormat}" FontSize="11"
                                       Foreground="White"/>
                        </Border>
                        <TextBlock Text="{Binding DataSize, StringFormat=' ({0} bytes)'}"
                                   Foreground="{DynamicResource ForegroundSecondaryBrush}"
                                   VerticalAlignment="Center" Margin="4,0,0,0"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <CheckBox Content="Format" IsChecked="{Binding IsFormatted}"
                                  VerticalAlignment="Center" Margin="0,0,8,0"
                                  Foreground="{DynamicResource ForegroundBrush}"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Formatted Data Display -->
            <TextBox Grid.Row="1"
                     Text="{Binding FormattedData, Mode=OneWay}"
                     IsReadOnly="True"
                     TextWrapping="NoWrap"
                     AcceptsReturn="True"
                     VerticalScrollBarVisibility="Auto"
                     HorizontalScrollBarVisibility="Auto"
                     FontFamily="Consolas"
                     FontSize="12"
                     Padding="12"
                     BorderThickness="0"
                     Background="{DynamicResource BackgroundBrush}"
                     Foreground="{DynamicResource ForegroundBrush}"/>
        </Grid>
    </Grid>
</UserControl>
